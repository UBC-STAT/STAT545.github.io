<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>worksheet_guide – STAT545 @ UBC</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-f55b795d08b5ec9c46d466a81ca0990b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">STAT545 @ UBC</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-syllabus" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Syllabus</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-syllabus">    
        <li>
    <a class="dropdown-item" href="../webpages/syllabus/syllabusA.html">
 <span class="dropdown-text">Syllabus: STAT 545 A (Part I)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/syllabus/syllabusB.html">
 <span class="dropdown-text">Syllabus: STAT 545 B (Part II)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lectures-part-i" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Lectures: Part I</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lectures-part-i">    
        <li>
    <a class="dropdown-item" href="../webpages/lectures_i/lec1a_installation.html">
 <span class="dropdown-text">Lecture 1A: Installation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_i/lec1b_introR.html">
 <span class="dropdown-text">Lecture 1B: Course Introduction and R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_i/lec2A_reproducibility.html">
 <span class="dropdown-text">Lecture 2A: Reproducibility</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_i/lec2b_versioncontrol.html">
 <span class="dropdown-text">Lecture 2B: Version Control</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_i/lec3_dplyr.html">
 <span class="dropdown-text">Lecture 3: Data Manipulation with dplyr</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_i/lec4_datavis.html">
 <span class="dropdown-text">Lecture 4: Data Visualization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_i/lec5_tidydata.html">
 <span class="dropdown-text">Lecture 5: Tidy Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_i/lec6a_modelfitting.html">
 <span class="dropdown-text">Lecture 6A: Model Fitting</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_i/lec6b_dates.html">
 <span class="dropdown-text">Lecture 6B: Factors and Dates</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_i/lec7a_readwritedata.html">
 <span class="dropdown-text">Lecture 7A: Reading and Writing Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_i/lec7b_joiningtibbles.html">
 <span class="dropdown-text">Lecture 7B: Tibble Joins</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lectures-part-ii" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Lectures: Part II</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lectures-part-ii">    
        <li>
    <a class="dropdown-item" href="../webpages/lectures_ii/lec8a_functions.html">
 <span class="dropdown-text">Lecture 8a: Functions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_ii/lec8b_advfunctions.html">
 <span class="dropdown-text">Lecture 8b: Advanced Functions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_ii/lec9_rpackages.html">
 <span class="dropdown-text">Lecture 9: R Packages</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_ii/lec10_shiny.html">
 <span class="dropdown-text">Lecture 10: Dashboards with R Shiny</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_ii/lec11_automation.html">
 <span class="dropdown-text">Lecture 11: Automation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_ii/lec12_characterdata.html">
 <span class="dropdown-text">Lecture 12: StringR and Regular Expressions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_ii/lec13_listcolumns.html">
 <span class="dropdown-text">Lecture 13: List Columns</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/lectures_ii/lec14_quarto.html">
 <span class="dropdown-text">Lecture 14: Websites and Slides with Quarto</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../webpages/worksheets.html"> 
<span class="menu-text">Worksheets</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-collaborative-project" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Collaborative Project</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-collaborative-project">    
        <li>
    <a class="dropdown-item" href="../webpages/collabproj/collabproj_deliverable1.html">
 <span class="dropdown-text">Collaborative Project: Deliverable 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/collabproj/collabproj_deliverable2.html">
 <span class="dropdown-text">Collaborative Project: Deliverable 2</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-mini-data-analysis" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Mini Data Analysis</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-mini-data-analysis">    
        <li>
    <a class="dropdown-item" href="../webpages/mda/mda_deliverable1.html">
 <span class="dropdown-text">Mini Data Analysis: Deliverable 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/mda/mda_deliverable2.html">
 <span class="dropdown-text">Mini Data Analysis: Deliverable 2</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-case-studies" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Case Studies</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-case-studies">    
        <li>
    <a class="dropdown-item" href="../webpages/casestudies/fev_datamanipulation.html">
 <span class="dropdown-text">Lecture 3 Case Study: Data Manipulation on FEV Dataset</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/casestudies/fev_datavis.html">
 <span class="dropdown-text">Lecture 4 Case Study: Data Visualization with FEV Dataset</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../webpages/casestudies/nycflights_dates.html">
 <span class="dropdown-text">Lecture 6b Case Study: Date and Times on NYC Flights (WITH SOLUTIONS)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../webpages/faq.html"> 
<span class="menu-text">FAQ</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#worksheets" id="toc-worksheets" class="nav-link active" data-scroll-target="#worksheets">Worksheets</a></li>
  <li><a href="#copying-worksheets-from-instructor-repo" id="toc-copying-worksheets-from-instructor-repo" class="nav-link" data-scroll-target="#copying-worksheets-from-instructor-repo">Copying Worksheets from Instructor Repo</a></li>
  <li><a href="#editing-existing-worksheets" id="toc-editing-existing-worksheets" class="nav-link" data-scroll-target="#editing-existing-worksheets">Editing Existing Worksheets</a>
  <ul class="collapse">
  <li><a href="#editing-text-cells" id="toc-editing-text-cells" class="nav-link" data-scroll-target="#editing-text-cells">Editing text cells</a></li>
  <li><a href="#the-autotest-system" id="toc-the-autotest-system" class="nav-link" data-scroll-target="#the-autotest-system">The Autotest System</a></li>
  <li><a href="#assigning-values-for-grading" id="toc-assigning-values-for-grading" class="nav-link" data-scroll-target="#assigning-values-for-grading">Assigning Values for Grading</a></li>
  </ul></li>
  <li><a href="#generate-a-version-with-tests-and-solutions" id="toc-generate-a-version-with-tests-and-solutions" class="nav-link" data-scroll-target="#generate-a-version-with-tests-and-solutions">Generate a Version with Tests and Solutions</a></li>
  <li><a href="#creating-student-facing-versions" id="toc-creating-student-facing-versions" class="nav-link" data-scroll-target="#creating-student-facing-versions">Creating Student Facing Versions</a></li>
  <li><a href="#autograding-worksheets" id="toc-autograding-worksheets" class="nav-link" data-scroll-target="#autograding-worksheets">Autograding Worksheets</a></li>
  <li><a href="#pushing-changes-to-github" id="toc-pushing-changes-to-github" class="nav-link" data-scroll-target="#pushing-changes-to-github">Pushing Changes to Github</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="worksheets" class="level2">
<h2 class="anchored" data-anchor-id="worksheets">Worksheets</h2>
<p>These instructions assume you have Jupyter/Anaconda installed as per the student instructions</p>
<p>Summary of Resources:</p>
<ul>
<li><p><a href="https://ttimbers.github.io/jupyter-nbgrader-r/slides/jupyter-nbgrader-r.html#7" class="uri">https://ttimbers.github.io/jupyter-nbgrader-r/slides/jupyter-nbgrader-r.html#7</a></p></li>
<li><p><a href="https://github.com/ttimbers/jupyter-nbgrader-r" class="uri">https://github.com/ttimbers/jupyter-nbgrader-r</a></p></li>
<li><p><a href="https://github.com/UBC-STAT/stat-545-instructor/blob/master/instructor-guides/autograding_worksheets.md" class="uri">https://github.com/UBC-STAT/stat-545-instructor/blob/master/instructor-guides/autograding_worksheets.md</a></p></li>
</ul>
<p>Pre-requisites:</p>
<ul>
<li><p>Set up Jupyer/Anaconda as per the student instructions</p></li>
<li><p>Download and Install Docker Desktop, if you don’t already have it (<a href="https://www.docker.com/products/docker-desktop/" class="uri">https://www.docker.com/products/docker-desktop/</a>)</p></li>
<li><p>Launch Docker Desktop and create an account</p></li>
</ul>
<hr>
</section>
<section id="copying-worksheets-from-instructor-repo" class="level2">
<h2 class="anchored" data-anchor-id="copying-worksheets-from-instructor-repo">Copying Worksheets from Instructor Repo</h2>
<ol type="1">
<li><p>Clone the instructor repo to your local machine (mine’s on desktop as Jupyter cannot access OneDrive?)</p>
<pre><code>git clone &lt;https://github.com/UBC-STAT/stat-545-instructor.git&gt; /path/to/destination</code></pre></li>
<li><p>Open the worksheet (for example, **worksheet_a01.ipynb) in Jupyter notebooks from the <code>worksheets/source</code> folder. These worksheets are written WITH solutions.</p></li>
<li><p>Edit the worksheet and save (more on this below)</p></li>
</ol>
<hr>
</section>
<section id="editing-existing-worksheets" class="level2">
<h2 class="anchored" data-anchor-id="editing-existing-worksheets">Editing Existing Worksheets</h2>
<section id="editing-text-cells" class="level3">
<h3 class="anchored" data-anchor-id="editing-text-cells">Editing text cells</h3>
<p>Some cells are read only. To temporarily enable editing, go to EDIT &gt; EDIT NOTEBOOK METADATA. Go to COMMON TOOLS and you should be able to change cells to “Editable”, then back to “Read Only”. At a minimum you should update the version number if making changes. Click the play button to view it normally again.</p>
</section>
<section id="the-autotest-system" class="level3">
<h3 class="anchored" data-anchor-id="the-autotest-system">The Autotest System</h3>
<p>The autotest system automatically checks student answers in Jupyter Notebooks using tests specified in **autotests.yml. It’s designed to work with nbgrader to support large-scale grading.</p>
<p>Solutions are written in the Jupyter Notebook wrapped between:</p>
<pre><code>### BEGIN SOLUTION
answer0.1a ← your_answer_here
### END SOLUTION</code></pre>
<p>Then, in another code chunk in the Jupyter notebook, we perform the autotest.</p>
<p>Key Command: <code>### HASHED AUTOTEST</code></p>
<ul>
<li><p>This special comment is placed at the top of a test code cell to indicate what the autotest should evaluate</p></li>
<li><p>You can also test multiple answers in one line using semicolons</p></li>
<li><p>Answers are hashed which makes them less obvious to students</p></li>
</ul>
<p>Example: <code>### HASHED AUTOTEST answer0.1_A; answer0.1_B; answer0.1_C</code></p>
<ul>
<li><p>The expression can contain any valid R expression which you wish to test</p></li>
<li><p>Here we test that answers_0.1 A through C are equivalent to the solutions</p></li>
<li><p>Multiple conditions are separated by semicolons</p></li>
</ul>
<p>Example: <code>### HASHED AUTOTEST length(answer1.1)</code></p>
<ul>
<li>tells autotest to evaluate the length of the student’s answer rather than the answer itself. In the student notebook, it will compute length(answer1.1) and compare the result to the expected length from the solution notebook.</li>
</ul>
<p>Autotest does the following:</p>
<ul>
<li><p>checks the type of the response (e.g., string, list, numeric) and runs the corresponding tests defined in the autotest.yml file for that type.</p></li>
<li><p>It compares the response against the expected value defined in the instructor’s solution notebook, using multiple stages of validation as specified in the autotest.yml file.</p></li>
<li><p>If the answer is incorrect, the student will receive an autogenerated error message based on the failed test criteria in the autotest.yml file.</p></li>
<li><p>Autotest runs tests in the order they are defined in the YAML file. This layered approach allows for more detailed checks and provides more specific feedback when a student’s answer is incorrect.</p></li>
</ul>
<p>All the test rules live in the autotest.yml file.</p>
<ul>
<li><p>You can edit or add to this file</p></li>
<li><p>Predefined test types include: string, numeric, list, dataframe, ggplots</p></li>
</ul>
<p>Full example:</p>
<p><img src="images/Screenshot 2025-08-09 at 1.16.18 PM.png" class="img-fluid" alt="Screenshot 2025-08-09 at 1.16.18 PM.png"></p>
<p><strong>Some notes on autograder tests</strong></p>
<ul>
<li>When writing a test that uses&nbsp;<code>sort()</code>&nbsp;on a character vector that contains special characters, the behaviour/ouput will depend on the user’s locale, which is also OS-dependent. Stripping away special characters with something like&nbsp;<code>gsub("[[:punct:]]", "", x)</code>&nbsp;before&nbsp;<code>sort()</code>&nbsp;can address this.</li>
</ul>
</section>
<section id="assigning-values-for-grading" class="level3">
<h3 class="anchored" data-anchor-id="assigning-values-for-grading">Assigning Values for Grading</h3>
<p>Values for each question are assigned using <code>{points: X}</code> where <code>X</code> is the value for the question. See below for an example in the instructor version with solutions (worksheets/source/worksheet_a01)</p>
<p><img src="images/Screenshot 2025-08-12 at 1.24.31 PM.png" class="img-fluid"></p>
<hr>
</section>
</section>
<section id="generate-a-version-with-tests-and-solutions" class="level2">
<h2 class="anchored" data-anchor-id="generate-a-version-with-tests-and-solutions">Generate a Version with Tests and Solutions</h2>
<p>This generates a student facing version including the tests that will be performed, but also includes the answer for easy debugging.</p>
<p>Navigate to the&nbsp;worksheets&nbsp;folder in the&nbsp;stat-545-instructor&nbsp;repo (using <code>cd</code> command), and run the following code</p>
<pre><code>nbgrader generate_assignment --source_with_tests --force worksheet_a01</code></pre>
<p>Open the folder in stat-545-instructor/worksheets/source_with_tests/ and you will see a new notebook that has answers AND runnable tests. Run all cells to ensure it works properly.</p>
<p>Tips: debug more by checking that you also get fails for wrong answers. You can also submit this to canvas under “student view” to generate a test submission for your autograder</p>
<hr>
</section>
<section id="creating-student-facing-versions" class="level2">
<h2 class="anchored" data-anchor-id="creating-student-facing-versions">Creating Student Facing Versions</h2>
<ol type="1">
<li><p>Open Powershell (Windows) or Terminal (Mac OS). Navigate to the&nbsp;worksheets&nbsp;folder in the&nbsp;stat-545-instructor&nbsp;repo (i.e, <code>cd Desktop/stat-545-instructor/worksheets</code>), and run the following code in your shell/terminal to “refresh the exchange directory”:</p>
<pre><code># remove existing directory, so we can start fresh for demo purposes
rm -rf /tmp/exchange

# create the exchange directory, with write permissions for everyone
mkdir /tmp/exchange
chmod ugo+rw /tmp/exchange</code></pre></li>
<li><p>Add the worksheet to database.db file by running:</p>
<pre><code>nbgrader db assignment add worksheet_aXX</code></pre>
<ul>
<li>if you get an error that nbgrader is not found, install it first using <code>pip install nbgrader</code> and then rerun the above code.</li>
</ul></li>
<li><p>Generate the student version of (say) worksheet_05a by running (<strong>TIP, you need to be in the directory that contains the file nbgrader_config.py file</strong>):</p>
<pre><code>nbgrader generate_assignment --force worksheet_aXX</code></pre></li>
<li><p>Take a look in the&nbsp;worksheets/release/&nbsp;folder – your outputted assignment should be there!</p></li>
<li><p>Add a new assignment to canvas for this worksheet (you’ll have to click on the “More Options” button when you go to create an assignment):</p>
<ul>
<li><p>Under the description write: “Please upload your Worksheet 5-A file here – it should be a .ipynb file named worksheet_aXX”.</p></li>
<li><p>Points: use the number of questions they need to get correct in order to get full points.</p></li>
<li><p>Change the “submission type” to “File Uploads”; then, click “Restrict Upload File Types”, and enter&nbsp;<code>ipynb</code></p></li>
<li><p>Input the Due Date</p></li>
<li><p>Click “Save and Publish”.</p></li>
</ul></li>
</ol>
<hr>
</section>
<section id="autograding-worksheets" class="level2">
<h2 class="anchored" data-anchor-id="autograding-worksheets">Autograding Worksheets</h2>
<p>Follow Steps A - E for the autograding workflow. We assume Docker Desktop has already been installed.</p>
<p><strong>A. Start Docker Container</strong></p>
<ol type="1">
<li><p>Open <strong>Docker Desktop</strong> and ensure it’s running (on Mac you will see a whale icon by the Bluetooth button on the top of your screen, and when you click it it should say docker is running)</p></li>
<li><p>Open a terminal window. Navigate to stat-545-instructor folder (parent directory) (i.e., and run Docker build</p>
<pre><code>cd Desktop/stat-545-instructor #change to your destination
docker build . -t nbgrader -f worksheet_dockerfile/Dockerfile</code></pre></li>
<li><p>Go to the worksheets&nbsp;(i.e., the folder containing the&nbsp;nbgrader_config.py&nbsp;file) and run a Docker container with the following command:</p>
<pre><code>cd worksheets

docker run --rm -p 8888:8888 \\
  -v "${PWD}":/mnt/nbgrader_root \\
  --name nbgradercontainer \\
  nbgrader:latest</code></pre>
<ul>
<li>This will show the link (third one works for me) to use to connect to the Jupyter web interface. You can minimize this Terminal window but&nbsp;<strong><em>DO NOT</em></strong> <strong>close it. You do not need to open any links.</strong> In another terminal, you can run <code>jupyter server list</code> to see the URLs of running servers with their tokens.</li>
</ul></li>
<li><p><strong>Open a new terminal window.</strong> Attach a terminal to the new container with</p>
<pre><code>docker exec -it nbgradercontainer /bin/bash. </code></pre>
<p>From now on, this terminal will be the main point of interaction with nbgrader! We will call this Terminal A. After running the command, you should see <code>(base) jovyan@xxxxxxxxxx:~$</code></p></li>
<li><p>The home directory in this Docker container is the same directory as&nbsp;worksheets/</p></li>
<li><p>To move things “into the Docker container”, you will move them to the corresponding directories in&nbsp;worksheets/</p></li>
<li><p>Within the Docker container, you will not be able to access anything outside of&nbsp;worksheets/</p></li>
<li><p>In Terminal A: type <code>ls -l</code> to view a detailed list of what’s in your directory</p>
<ul>
<li><p>You might need to create some directories in&nbsp;worksheets/&nbsp;so that they exist in the Docker container if anything is missing</p></li>
<li><p>If anything is highlighted in red, you can try to remove them and then call <code>mkdir</code>.</p></li>
</ul></li>
</ol>
<pre><code>total 4
lrwxrwxrwx 1 jovyan users   32 Aug 11 19:48 autotests.yml -&gt; /mnt/nbgrader_root/autotests.yml
lrwxrwxrwx 1 jovyan users   28 Aug 11 19:48 canvas.py -&gt; /mnt/nbgrader_root/canvas.py
lrwxrwxrwx 1 jovyan users   29 Aug 11 19:48 downloaded -&gt; /mnt/nbgrader_root/downloaded
lrwxrwxrwx 1 jovyan users   31 Aug 11 19:48 gradebook.db -&gt; /mnt/nbgrader_root/gradebook.db
lrwxrwxrwx 1 jovyan users   25 Aug 11 19:48 grades -&gt; /mnt/nbgrader_root/grades
lrwxrwxrwx 1 jovyan users   37 Aug 11 19:48 nbgrader_config.py -&gt; /mnt/nbgrader_root/nbgrader_config.py
lrwxrwxrwx 1 jovyan users   26 Aug 11 19:48 release -&gt; /mnt/nbgrader_root/release
lrwxrwxrwx 1 jovyan users   25 Aug 11 19:48 source -&gt; /mnt/nbgrader_root/source
drwsrwsr-x 2 jovyan users 4096 Oct 20  2023 work</code></pre>
<ul>
<li><p>If you need to create some directories, you can create these directories in&nbsp;worksheets/, using another separate Terminal window (a.k.a. Terminal B) <code>mkdir grades; mkdir downloaded</code></p></li>
<li><p>If you need the autograder to have access to files, edit the Dockerfile in worksheets_dockerfile/ (i.e., it needs the autotest.yml file)</p></li>
</ul>
<p><strong>B. Prepare for Submissions</strong></p>
<p><em>This step only needs to be done the first time you grade!</em></p>
<p>We need to import Student IDs from Canvas</p>
<ol type="1">
<li><p>Export the gradebook for STAT545 as a CSV file (under Grades in Canvas). Save the unmodifed version in the grading/ folder.</p></li>
<li><p>Open the CSV and remove all but the ID and Student column.</p></li>
<li><p>Rename the “ID” column to “id” and rename the “Student” column to “student”</p></li>
<li><p>Delete the second row. Save as students.csv in worksheets/</p>
<ul>
<li><p>Because you are using <strong>save as</strong>, there will now be two versions of the Canvas gradebook CSV file</p>
<ul>
<li><p>Original: DATE_Grades-STAT_545A_101.csv. MOVE THIS TO grading/</p></li>
<li><p>Modified: students.csv (should already be in worksheets/</p></li>
</ul></li>
</ul></li>
<li><p>Run the following command in Terminal A:</p>
<pre><code>nbgrader db student import /mnt/nbgrader_root/students.csv</code></pre></li>
</ol>
<p><strong>C. Gather Submissions</strong></p>
<ol type="1">
<li><p>After the deadline, download student submissions from Canvas.</p></li>
<li><p>Move the ZIP file (submissions.zip) into the folder&nbsp;downloaded/{assignment_id}/archive.</p>
<ul>
<li><p>You will need to make these 3 nested folders in&nbsp;worksheets/&nbsp;to be able to access them within the Docker container, for example (in Terminal B):</p></li>
<li><p>Within the worksheets/ folder, make folders for the following path: downloaded/{assignment_id}/archive manually or by:</p></li>
</ul>
<pre><code>mkdir -p downloaded/{assignment_id}/archive &amp;&amp; mv ~/Downloads/submissions.zip downloaded/{assignment_id}/archive</code></pre></li>
<li><p>Ensure that the file&nbsp;<a href="http://canvas.py">canvas.py</a>&nbsp;is in the worksheet directory and that the&nbsp;nbgrader_config.py&nbsp;file contains the following lines:</p>
<p><code># Only collect submitted notebooks with valid names  c.ZipCollectApp.strict = True</code></p></li>
<li><p>Within the Docker container &nbsp;(Terminal A) run</p></li>
</ol>
<pre><code>nbgrader generate_assignment --force {assignment_id} </code></pre>
<p>for example:&nbsp;<code>nbgrader generate_assignment --force worksheet_a02</code>.</p>
<ul>
<li>It doesn’t matter if you’ve run&nbsp;<code>nbgrader generate_assignment</code>&nbsp;in the past to generate the student-facing version of the worksheet– it must be run&nbsp;<em>again</em>&nbsp;within the Docker container or you will encounter issues.</li>
</ul>
<ol start="5" type="1">
<li>In Terminal A: collect the submissions:</li>
</ol>
<pre><code>nbgrader zip_collect --collector=canvas.CanvasPlugin {assignment_id}</code></pre>
<p>for example&nbsp;<code>nbgrader zip_collect --collector=canvas.CanvasPlugin worksheet_a02</code>.</p>
<ul>
<li>add <code>-- force</code> if file already exists to overwrite it</li>
</ul>
<p><strong>D. Run the Autograder</strong></p>
<ol type="1">
<li>To ensure the assignment is added to nbgrader and the notebook generated, run&nbsp;in Terminal A:</li>
</ol>
<pre><code>nbgrader db assignment list</code></pre>
<p>You should see something like:</p>
<p><code>worksheet_a02 (due: None)  # &lt;-- assignment "worksheet_a02" is available     - worksheet_a02        # &lt;-- a notebook called "worksheet_a02" is made</code></p>
<p>If the assignment is not listed, add it with&nbsp;<code>nbgrader db assignment add {assignment_id}</code>&nbsp;(Terminal A), and then generate the assignment with&nbsp;<code>nbgrader generate_assignment --force {assignment_id}</code>&nbsp;(Terminal A). If you encounter any issues about the notebook already being associated with submissions, delete the submissions within each student ID, and re-gather them using&nbsp;<code>nbgrader zip_collect --collector=canvas.CanvasPlugin {assignment_id}</code>&nbsp;(Terminal A).</p>
<ol start="2" type="1">
<li>Run autograding with (Terminal A):</li>
</ol>
<pre><code>nbgrader autograde {assignment_id}</code></pre>
<ol start="3" type="1">
<li>Export grades with</li>
</ol>
<pre><code>nbgrader export</code></pre>
<ul>
<li>This creates a file&nbsp;grades.csv&nbsp;with the students’ canvas ID and the points for this one worksheet (although the other worksheets are present as well, they can be ignored).</li>
</ul>
<ol start="4" type="1">
<li>Move this file to the&nbsp;grades&nbsp;directory:</li>
</ol>
<pre><code>mv grades.csv grades/grades_{assignment_id}.csv</code></pre>
<p>Otherwise it will be lost when the Docker container is terminated.</p>
<ul>
<li><p>IMPORTANT: Make sure there is no whitespace after the .csv name!</p></li>
<li><p>Now you should see the grades_worksheet_axx.csv file in your local grades folder.</p></li>
</ul>
<p><strong>E. Publish scores</strong></p>
<ol type="1">
<li><p>Open a new Terminal window (Terminal B). <code>cd</code> to stat-545-instructor/grading/ directory.</p></li>
<li><p>Use the file&nbsp;grading/compile_nbgrader_grades.R&nbsp;to compile the grades from nbgrader to a Canvas-readable CSV format. Navigate to the&nbsp;grading/&nbsp;directory and run the script (Terminal B):</p>
<pre><code>Rscript compile_nbgrader_grades.R {raw_canvas_grades.csv} {assignment_id}</code></pre>
<ul>
<li><p>This script will merge the&nbsp;nbgrader&nbsp;grades and the existing grades from Canvas to the {raw_canvas_grades.csv}, and the output will be canvas.csv in worksheets/grades.</p></li>
<li><p>If for some reason the csv is not opening properly, check that there is no white space after the .csv exenstion. If problem still persists, open Excel, go to File &gt; Import &gt; import from CSV and find the grades_worksheet_a01.csv file. Import it in cell A1. Save as csv and overwrite the original.</p></li>
</ul></li>
</ol>
<!-- -->
<ol start="3" type="1">
<li><p>Verify that the scores are correct.</p>
<ul>
<li>Check a few random assignments to ensure grading is correct</li>
<li><strong>WARNING</strong>: if you had multiple versions of the worksheet circulating, the autograder will run into issues with cell metadata not matching, etc. These worksheets will be given a score of 0, so make sure that you check that all the 0’s are&nbsp;<em>actually</em>&nbsp;0’s and not because of differing worksheet versions.&nbsp;<strong>Avoid circulating multiple versions of worksheets</strong>, or make sure that students are only submitting the newest version (that corresponds to the instructor version of the worksheet). Let the students know that adding extra cells in their notebook will cause issues with the autograder.</li>
</ul></li>
<li><p>Upload the file&nbsp;worksheets/grades/canvas.csv&nbsp;to the “grades” page by clicking on “Actions” &gt; “Import”</p></li>
</ol>
<p><strong>Troubleshooting tips</strong></p>
<ul>
<li><p>The autograder grades students in id order, and terminates at the first error.</p></li>
<li><p>Common fixable errors include duplicating cells (fixable by going into the worksheet in the&nbsp;submitted&nbsp;folder and deleting the cells) and changing chunk types (e.g.&nbsp;from a code chunk to a text chunk).</p></li>
<li></li>
</ul>
<hr>
</section>
<section id="pushing-changes-to-github" class="level2">
<h2 class="anchored" data-anchor-id="pushing-changes-to-github">Pushing Changes to Github</h2>
<ul>
<li><p>optional: create your own branch <code>git checkout -b newbranchname</code></p></li>
<li><p>add changes: <code>git add .</code></p></li>
<li><p>commit changes: <code>git commit -m “edits to worksheet aXX"</code></p></li>
<li><p>push: <code>git push origin master</code> or <code>git push origin &lt;newbranchname</code>&gt;</p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>